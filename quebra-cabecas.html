<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Quebra-CabeÃ§a Drag & Drop</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 { margin-bottom: 15px; }

    .board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 2px;
      border: 3px solid #333;
      background: #333;
    }

    .slot {
      width: 100px;
      height: 100px;
      background: #ddd;
      position: relative;
    }

    .piece {
      width: 100px;
      height: 100px;
      background-image: url("imagens/7erros.jpg");
      background-size: 300px 300px;
      cursor: grab;
    }

    .piece.dragging {
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <h1>Quebra-CabeÃ§a Drag & Drop</h1>
  <div class="board" id="board"></div>
  <p id="status"></p>

  <script>
    const size = 3; // 3x3
    const board = document.getElementById("board");
    const status = document.getElementById("status");
    let slots = [];

    function createBoard() {
      for (let row = 0; row < size; row++) {
        for (let col = 0; col < size; col++) {
          const slot = document.createElement("div");
          slot.classList.add("slot");
          slot.dataset.correct = row * size + col; // posiÃ§Ã£o correta
          board.appendChild(slot);
          slots.push(slot);
        }
      }
    }

    function createPieces() {
      let pieces = [];
      for (let row = 0; row < size; row++) {
        for (let col = 0; col < size; col++) {
          const index = row * size + col;
          const piece = document.createElement("div");
          piece.classList.add("piece");
          piece.style.backgroundPosition = `-${col * 100}px -${row * 100}px`;
          piece.draggable = true;
          piece.dataset.index = index;
          pieces.push(piece);
        }
      }
      return pieces;
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function init() {
      createBoard();
      const pieces = createPieces();
      shuffle(pieces);
      pieces.forEach(piece => {
        // coloca peÃ§a em um slot aleatÃ³rio
        const slot = slots[Math.floor(Math.random() * slots.length)];
        if (!slot.firstChild) slot.appendChild(piece);
        else board.appendChild(piece); // fallback se jÃ¡ ocupado
      });

      // eventos drag & drop
      let dragged = null;

      board.addEventListener("dragstart", e => {
        if (e.target.classList.contains("piece")) {
          dragged = e.target;
          e.target.classList.add("dragging");
        }
      });

      board.addEventListener("dragend", e => {
        if (dragged) {
          dragged.classList.remove("dragging");
          dragged = null;
        }
      });

      board.addEventListener("dragover", e => {
        e.preventDefault(); // permite soltar
      });

      board.addEventListener("drop", e => {
        e.preventDefault();
        const slot = e.target.classList.contains("slot") ? e.target : e.target.parentElement;
        if (slot.classList.contains("slot") && !slot.firstChild) {
          slot.appendChild(dragged);
          checkWin();
        }
      });
    }

    function checkWin() {
      const correct = slots.every(slot => {
        if (!slot.firstChild) return false;
        return slot.dataset.correct === slot.firstChild.dataset.index;
      });
      if (correct) {
        status.textContent = "ðŸŽ‰ ParabÃ©ns! VocÃª completou o quebra-cabeÃ§a!";
      }
    }

    init();
  </script>
</body>
</html>
